/**
 * SCORM Generator — UI
 * ARELANCE S.L. 2025
 */

:root {
    --primary: #143554;
    --primary-mid: #1a4a6e;
    --accent: #F05726;
    --accent-h: #d94a1e;
    --green: #059669;
    --green-bg: #ecfdf5;
    --red: #dc2626;
    --surface: #ffffff;
    --bg: #0c1e2f;
    --bg2: #112a3e;
    --bg-card: #f7f8fa;
    --border: #e2e8f0;
    --text: #1e293b;
    --text2: #64748b;
    --text3: #94a3b8;
    --font: 'DM Sans', system-ui, sans-serif;
    --r: 14px;
    --rs: 10px;
}

*{box-sizing:border-box;margin:0;padding:0}
html{font-size:16px;height:100%}
body{font-family:var(--font);background:var(--bg);min-height:100%;color:var(--text);line-height:1.6;-webkit-font-smoothing:antialiased}

/* ── Layout: centered vertically ── */
.app-container{
    max-width:800px;
    margin:0 auto;
    padding:0 1.5rem;
    min-height:100vh;
    display:flex;
    flex-direction:column;
    justify-content:center;
}
.app-container.no-center{justify-content:flex-start}

/* ── Header ── */
.app-header{text-align:center;padding:1.25rem 0 .15rem}
.app-logo{display:block;margin:0 auto .75rem;max-height:52px;max-width:200px;width:auto;object-fit:contain}
.brand{display:inline-flex;align-items:baseline;gap:.5rem;font-family:var(--font)}
.brand-word{font-size:1.65rem;font-weight:700;color:rgba(255,255,255,.9);letter-spacing:-.3px}
.brand-letter{display:inline-flex;align-items:center;justify-content:center;background:var(--accent);color:#fff;width:2.1rem;height:2.1rem;border-radius:8px;font-size:1.35rem;font-weight:800;margin-right:2px;vertical-align:baseline;line-height:1}

/* ── Steps ── */
.steps-container{display:flex;align-items:center;justify-content:center;padding:1.5rem 0 1.25rem;gap:0}
.step{display:flex;flex-direction:column;align-items:center;gap:.3rem}
.step-circle{width:38px;height:38px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-weight:700;font-size:.85rem;background:rgba(255,255,255,.07);color:rgba(255,255,255,.3);border:1.5px solid rgba(255,255,255,.08);transition:all .3s}
.step.active .step-circle{background:var(--accent);color:#fff;border-color:var(--accent);box-shadow:0 0 0 4px rgba(240,87,38,.2)}
.step.completed .step-circle{background:var(--green);color:#fff;border-color:var(--green)}
.step-label{font-size:.7rem;color:rgba(255,255,255,.3);font-weight:600;text-transform:uppercase;letter-spacing:.5px}
.step.active .step-label,.step.completed .step-label{color:rgba(255,255,255,.7)}
.step-line{width:56px;height:1.5px;background:rgba(255,255,255,.08);margin:0 .35rem;margin-bottom:1rem}
.step-line.completed{background:var(--green)}

/* ── Card ── */
.main-content{flex:0 0 auto}
.card{background:var(--surface);border-radius:var(--r);box-shadow:0 20px 60px rgba(0,0,0,.25);padding:1.5rem 2.5rem 1.75rem;margin-bottom:.75rem}
.card-center{text-align:center}
.card-title{font-size:1.4rem;font-weight:700;color:var(--primary);letter-spacing:-.3px;margin-bottom:.3rem}
.card-center .card-title{margin-bottom:.15rem}
.card-desc{color:var(--text2);font-size:.9rem;margin-bottom:1rem;line-height:1.55}

/* ── Upload ── */
.upload-zone{border:2px dashed var(--border);border-radius:var(--rs);padding:1.5rem 2rem;text-align:center;cursor:pointer;transition:all .2s;background:var(--bg-card)}
.upload-zone:hover,.upload-zone.dragover{border-color:var(--accent);background:#fffaf8}
.upload-icon{color:var(--text3);margin-bottom:.5rem;transition:color .2s}
.upload-zone:hover .upload-icon{color:var(--accent)}
.upload-text{color:var(--text);font-size:.9rem;font-weight:500;margin-bottom:.15rem}
.upload-link{color:var(--accent);font-weight:600;cursor:pointer}
.upload-hint{font-size:.78rem;color:var(--text3)}

/* ── File ── */
.file-preview{display:flex;align-items:center;gap:.65rem;padding:.7rem .85rem;background:var(--green-bg);border-radius:var(--rs);border:1px solid #a7f3d0;margin-top:.75rem}
.file-icon{color:var(--green);flex-shrink:0}
.file-info{flex:1;min-width:0;text-align:left}
.file-name{display:block;font-weight:600;color:var(--text);font-size:.85rem;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
.file-size{font-size:.75rem;color:var(--text2)}

/* ── Buttons ── */
.btn{display:inline-flex;align-items:center;justify-content:center;gap:.4rem;padding:.6rem 1.15rem;border:none;border-radius:var(--rs);font-family:var(--font);font-size:.85rem;font-weight:600;cursor:pointer;transition:all .15s;text-decoration:none;line-height:1.3}
.btn:disabled{opacity:.35;cursor:not-allowed}
.btn svg{flex-shrink:0}
.btn-primary{background:var(--primary);color:#fff}
.btn-primary:hover:not(:disabled){background:var(--primary-mid)}
.btn-accent{background:var(--accent);color:#fff}
.btn-accent:hover:not(:disabled){background:var(--accent-h)}
.btn-ghost{background:transparent;color:var(--text2);border:1px solid var(--border)}
.btn-ghost:hover:not(:disabled){background:var(--bg-card);color:var(--text)}
.btn-sm{padding:.4rem .7rem;font-size:.78rem}
.btn-lg{padding:.85rem 1.75rem;font-size:.95rem}
.btn-full{width:100%;margin-top:.75rem}
.btn-icon{width:32px;height:32px;border-radius:6px;display:flex;align-items:center;justify-content:center;background:transparent;border:none;cursor:pointer;color:var(--text3);transition:all .15s}
.btn-icon:hover{background:rgba(0,0,0,.05);color:var(--red)}
.btn-group{display:flex;gap:.6rem;margin-top:1.75rem}
.btn-group .btn:last-child{flex:1}
.mt-3{margin-top:.75rem}

/* ── Forms ── */
.form-grid{display:grid;grid-template-columns:repeat(2,1fr);gap:.85rem}
.form-group label{display:block;font-weight:600;color:var(--text);margin-bottom:.25rem;font-size:.8rem}
.form-group.full{grid-column:span 2}
.form-group input{width:100%;padding:.6rem .75rem;border:1.5px solid var(--border);border-radius:var(--rs);font-family:var(--font);font-size:.85rem;transition:all .15s;background:var(--surface);color:var(--text)}
.form-group input:focus{outline:none;border-color:var(--accent);box-shadow:0 0 0 3px rgba(240,87,38,.08)}
.divider{border:none;border-top:1px solid var(--border);margin:1.5rem 0}
.section-title{color:var(--primary);font-size:.9rem;font-weight:700;margin-bottom:.7rem}

/* ── Units ── */
.units-list{max-height:300px;overflow-y:auto}
.unit-item{display:flex;align-items:center;gap:.75rem;padding:.65rem .75rem;background:var(--bg-card);border:1px solid var(--border);border-radius:var(--rs);margin-bottom:.4rem;transition:border-color .15s}
.unit-item:hover{border-color:var(--primary-mid)}
.unit-num{background:var(--primary);color:#fff;min-width:38px;height:28px;border-radius:6px;display:flex;align-items:center;justify-content:center;font-weight:700;font-size:.72rem;flex-shrink:0}
.unit-title{flex:1;font-weight:500;font-size:.85rem;color:var(--text)}
.unit-stats{display:flex;gap:.6rem;font-size:.72rem;color:var(--text3)}
.unit-hours{color:var(--accent);font-weight:700;font-size:.8rem;white-space:nowrap;display:flex;align-items:center;gap:2px}
.unit-hours-input{width:42px;border:1px solid transparent;background:transparent;font:inherit;font-size:.8rem;font-weight:700;color:var(--accent);padding:.2rem .3rem;border-radius:4px;text-align:right;transition:all .2s;-moz-appearance:textfield}
.unit-hours-input::-webkit-inner-spin-button,.unit-hours-input::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}
.unit-hours-input:hover{border-color:var(--border);background:var(--surface)}
.unit-hours-input:focus{outline:none;border-color:var(--accent);background:#fff;box-shadow:0 0 0 2px rgba(240,87,38,.1)}

/* ── Stats ── */
.summary-grid{display:grid;grid-template-columns:repeat(4,1fr);gap:.5rem;margin:1.25rem 0}
.summary-item{background:var(--bg-card);padding:.75rem .5rem;border-radius:var(--rs);text-align:center;border:1px solid var(--border)}
.summary-item .value{font-size:1.3rem;font-weight:700;color:var(--primary);line-height:1.1}
.summary-item .label{font-size:.65rem;color:var(--text3);margin-top:.1rem;font-weight:600;text-transform:uppercase;letter-spacing:.3px}

/* ── Tabs ── */
.tabs{border:1px solid var(--border);border-radius:var(--r);overflow:hidden}
.tabs-header{display:flex;background:var(--bg-card);border-bottom:1px solid var(--border);overflow-x:auto}
.tab-btn{padding:.6rem 1rem;background:transparent;border:none;cursor:pointer;font-weight:600;font-size:.8rem;color:var(--text3);transition:all .15s;white-space:nowrap;font-family:var(--font);border-bottom:2px solid transparent;margin-bottom:-1px}
.tab-btn:hover{color:var(--text)}
.tab-btn.active{color:var(--accent);border-bottom-color:var(--accent);background:var(--surface)}
.tabs-content{padding:1rem;max-height:380px;overflow-y:auto}
.tab-panel{display:none}.tab-panel.active{display:block}
.panel-section{margin-bottom:1rem}
.panel-section h4{color:var(--primary);font-size:.8rem;margin-bottom:.4rem;padding-bottom:.3rem;border-bottom:2px solid var(--accent)}
.flashcard-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(170px,1fr));gap:.4rem}
.flashcard-item{background:var(--primary);color:#fff;padding:.6rem .75rem;border-radius:var(--rs);font-size:.78rem}
.flashcard-item strong{display:block;margin-bottom:.15rem;font-size:.8rem}
.flashcard-item span{opacity:.8;font-size:.72rem}
.question-item{background:var(--bg-card);padding:.65rem .75rem;border-radius:var(--rs);margin-bottom:.35rem;border:1px solid var(--border)}
.question-item strong{display:block;margin-bottom:.25rem;color:var(--primary);font-size:.82rem}
.question-item ul{margin-left:1rem;font-size:.78rem;color:var(--text2)}
.question-item li.correct{color:var(--green);font-weight:600}

/* ── Success ── */
.success-check{width:56px;height:56px;border-radius:50%;background:var(--green-bg);display:flex;align-items:center;justify-content:center;margin:0 auto 1rem;color:var(--green)}

/* ── Loading ── */
.loading-overlay{position:fixed;inset:0;background:rgba(12,30,47,.97);display:flex;align-items:center;justify-content:center;z-index:1000}
.loading-content{text-align:center;color:#fff;max-width:320px;padding:2rem}
.spinner{width:40px;height:40px;border:3px solid rgba(255,255,255,.1);border-top-color:var(--accent);border-radius:50%;animation:spin .7s linear infinite;margin:0 auto 1.25rem}
@keyframes spin{to{transform:rotate(360deg)}}
.loading-content h3{margin-bottom:.25rem;font-size:1rem;font-weight:600}
.loading-content p{opacity:.5;margin-bottom:1rem;font-size:.85rem}
.progress-bar{height:3px;background:rgba(255,255,255,.08);border-radius:2px;overflow:hidden}
.progress-fill{height:100%;background:var(--accent);border-radius:2px;transition:width .3s;width:0%}

/* ── Footer ── */
.app-footer{text-align:center;padding:1rem;color:rgba(255,255,255,.2);font-size:.72rem;font-weight:500;letter-spacing:.5px}

/* ── Utility ── */
.hidden{display:none!important}

/* ── Templates ── */
.templates-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(180px,1fr));gap:.6rem;margin:.6rem 0}
.template-card{border:1.5px solid var(--border);border-radius:var(--rs);padding:.7rem;cursor:pointer;transition:all .15s;background:var(--surface);position:relative}
.template-card:hover{border-color:var(--primary-mid)}
.template-card.selected{border-color:var(--accent);box-shadow:0 0 0 3px rgba(240,87,38,.12)}
.template-card.selected::after{content:'\2713';position:absolute;top:.4rem;right:.4rem;background:var(--accent);color:#fff;width:20px;height:20px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:.65rem;font-weight:700}
.template-preview{width:100%;height:64px;border-radius:6px;margin-bottom:.5rem;overflow:hidden;display:flex;align-items:center;justify-content:center;position:relative}
.template-preview img{width:100%;height:100%;object-fit:cover}
.template-preview .tpl-color-bar{display:flex;position:absolute;bottom:0;left:0;right:0;height:3px}
.template-preview .tpl-color-bar span{flex:1;height:100%}
.template-name{font-weight:600;font-size:.8rem;color:var(--text)}
.template-author{font-size:.7rem;color:var(--text3)}
.template-desc{display:none}
.template-actions{display:flex;gap:.4rem;margin:.4rem 0}
.template-delete{position:absolute;top:.3rem;left:.3rem;background:rgba(220,38,38,.85);color:#fff;border:none;width:18px;height:18px;border-radius:50%;font-size:.6rem;cursor:pointer;display:none;align-items:center;justify-content:center;line-height:1}
.template-card:hover .template-delete{display:flex}
.template-card.selected .template-delete,.template-card.is-default .template-delete{display:none}
.template-loading{grid-column:1/-1;text-align:center;padding:1rem;color:var(--text3);font-size:.8rem}

/* ── Content Preview (Step 3) ── */
.preview-section{border:1px solid var(--border);border-radius:var(--rs);padding:1rem;margin:.6rem 0;background:var(--surface)}
.preview-section-title{font-size:.95rem;font-weight:700;color:var(--primary);margin:0 0 .6rem;padding-bottom:.4rem;border-bottom:2px solid var(--accent)}
.preview-block{font-size:.82rem;line-height:1.5;color:var(--text2);margin:.4rem 0;padding:.5rem .7rem;border-radius:6px}
.preview-parrafo{background:#f8f9fa;border-left:3px solid var(--border)}
.preview-definicion{background:#e8f4f8;border-left:3px solid #0ea5e9}
.preview-lista{background:#f0fdf4;border-left:3px solid #22c55e}
.preview-lista ul{margin:.3rem 0 0 1rem;padding:0}
.preview-lista li{margin:.2rem 0}
.preview-list-title{font-weight:600;margin:0 0 .3rem;font-size:.82rem}
.preview-tabla{background:#fefce8;border-left:3px solid #eab308;overflow-x:auto}
.preview-tabla table{width:100%;border-collapse:collapse;font-size:.78rem;margin:.3rem 0}
.preview-tabla th{background:#fef9c3;padding:.3rem .5rem;text-align:left;font-weight:600;border:1px solid #fde68a}
.preview-tabla td{padding:.3rem .5rem;border:1px solid #fde68a}
.preview-importante{background:#fef2f2;border-left:3px solid #ef4444}
.preview-sabias{background:#eff6ff;border-left:3px solid #3b82f6}
.preview-ejemplo{background:#fdf4ff;border-left:3px solid #a855f7}
.preview-comparativa{background:#f0fdfa;border-left:3px solid #14b8a6}
.preview-comparativa ul{margin:.3rem 0 0 1rem;padding:0}

/* ── Editable unit titles ── */
.unit-title-input{width:100%;border:1px solid transparent;background:transparent;font:inherit;font-size:.95rem;font-weight:600;color:var(--text);padding:.3rem .5rem;border-radius:6px;transition:all .2s}
.unit-title-input:hover{border-color:var(--border);background:var(--surface)}
.unit-title-input:focus{outline:none;border-color:var(--accent);background:#fff;box-shadow:0 0 0 3px rgba(240,87,38,.1)}

/* ── Login ── */
.login-wrap{max-width:360px;margin:0 auto}.login-wrap .card{margin-top:1.5rem}
.login-wrap .card{padding:2rem 2rem 1.75rem}
.login-icon{color:var(--accent);margin-bottom:.5rem}
.login-icon svg{width:32px;height:32px}
.login-form{margin-top:.75rem}
.login-error{background:#fee2e2;color:#991b1b;border:1px solid #fca5a5;padding:.5rem .75rem;border-radius:var(--rs);font-size:.82rem;font-weight:500;margin-bottom:.4rem;text-align:center}

/* ── User bar ── */
.app-header{position:relative}
.user-bar-name{position:absolute;top:1.1rem;left:0;color:var(--accent);font-size:.8rem;font-weight:600}
.user-bar-actions{display:flex;align-items:center;gap:.45rem;position:absolute;top:1.1rem;right:0}
.user-bar-actions .btn-ghost{color:var(--accent);border-color:rgba(255,255,255,.15)}
.user-bar-actions .btn-ghost:hover:not(:disabled){background:rgba(240,87,38,.12);color:var(--accent);border-color:var(--accent)}
.user-bar-actions .btn-ghost svg{stroke:var(--accent)}
.role-admin{background:var(--accent);color:#fff}
.role-user{background:rgba(255,255,255,.12);color:rgba(255,255,255,.5)}

/* ── Modal ── */
.modal-overlay{position:fixed;inset:0;background:rgba(12,30,47,.7);display:flex;align-items:center;justify-content:center;z-index:999;backdrop-filter:blur(4px)}
.modal-box{background:var(--surface);border-radius:var(--r);padding:1.75rem 2rem;width:100%;max-width:380px;box-shadow:0 20px 60px rgba(0,0,0,.35)}
.modal-header{display:flex;align-items:center;justify-content:space-between;margin-bottom:1rem}
.modal-title{font-size:1.1rem;font-weight:700;color:var(--primary)}

/* ── Admin Panel ── */
#admin-panel{margin-top:1.5rem}
#admin-panel.card{padding-top:1.5rem}
.admin-header-row{display:flex;align-items:center;justify-content:space-between;margin-bottom:.5rem}
.admin-create-box{background:var(--bg-card);border:1px solid var(--border);border-radius:var(--rs);padding:1rem 1.25rem;margin:.75rem 0}
.admin-create-form{grid-template-columns:1fr 1fr 1fr auto}
.admin-select{width:100%;padding:.6rem .75rem;border:1.5px solid var(--border);border-radius:var(--rs);font-family:var(--font);font-size:.85rem;background:var(--surface);color:var(--text);cursor:pointer}
.admin-select:focus{outline:none;border-color:var(--accent);box-shadow:0 0 0 3px rgba(240,87,38,.08)}
.admin-table-wrap{overflow-x:auto;margin:.5rem 0}
.admin-table{width:100%;border-collapse:collapse;font-size:.85rem}
.admin-table th{background:var(--primary);color:#fff;padding:.6rem .75rem;text-align:left;font-weight:600;font-size:.78rem;text-transform:uppercase;letter-spacing:.3px}
.admin-table td{padding:.55rem .75rem;border-bottom:1px solid var(--border);vertical-align:middle}
.admin-table tr:hover td{background:var(--bg-card)}
.admin-table strong{color:var(--primary)}
.admin-date{font-size:.75rem;color:var(--text3);white-space:nowrap}
.admin-role-select{padding:.35rem .5rem;border:1.5px solid var(--border);border-radius:6px;font-family:var(--font);font-size:.8rem;background:var(--surface);cursor:pointer}
.admin-role-select:focus{outline:none;border-color:var(--accent)}
.admin-role-select:disabled{opacity:.5;cursor:not-allowed}
.admin-del-btn{color:var(--text3)}
.admin-del-btn:hover{color:var(--red)!important;background:rgba(220,38,38,.06)}
.admin-msg{padding:.5rem .75rem;border-radius:var(--rs);font-size:.82rem;font-weight:500;text-align:center;margin-top:.5rem}
.admin-msg-ok{background:#ecfdf5;color:#065f46;border:1px solid #a7f3d0}
.admin-msg-error{background:#fee2e2;color:#991b1b;border:1px solid #fca5a5}

/* ── Pagination ── */
.admin-pagination{display:flex;align-items:center;justify-content:space-between;margin-top:.75rem;padding-top:.75rem;border-top:1px solid var(--border)}
.pg-left,.pg-right{flex:0 0 auto}
.pg-center{display:flex;align-items:center;gap:.25rem}
.pg-info{font-size:.75rem;color:var(--text3);font-weight:500}
.pg-btn{width:30px;height:30px;border-radius:6px;border:1px solid var(--border);background:var(--surface);color:var(--text2);font-family:var(--font);font-size:.8rem;font-weight:600;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all .15s}
.pg-btn:hover:not(:disabled){border-color:var(--accent);color:var(--accent);background:#fffaf8}
.pg-btn:disabled{opacity:.3;cursor:not-allowed}
.pg-btn.pg-active{background:var(--accent);color:#fff;border-color:var(--accent)}
.pg-per-page{padding:.35rem .5rem;border:1.5px solid var(--border);border-radius:6px;font-family:var(--font);font-size:.78rem;background:var(--surface);color:var(--text2);cursor:pointer}
.pg-per-page:focus{outline:none;border-color:var(--accent)}

/* ── Responsive ── */
@media(max-width:640px){
    .app-container{padding:0 1rem}
    .card{padding:1.5rem}
    .form-grid{grid-template-columns:1fr}
    .form-group.full{grid-column:span 1}
    .summary-grid{grid-template-columns:repeat(2,1fr)}
    .btn-group{flex-direction:column}
    .btn-group .btn:last-child{flex:none}
    .user-bar-name,.user-bar-actions{position:static}
    .app-header{display:flex;flex-wrap:wrap;justify-content:center;gap:.5rem}
    .admin-create-form{grid-template-columns:1fr 1fr}
}

/* Toggle switch */
.toggle-switch{position:relative;display:inline-block;width:48px;height:26px}
.toggle-switch input{opacity:0;width:0;height:0}
.toggle-slider{position:absolute;cursor:pointer;top:0;left:0;right:0;bottom:0;background:#ccc;border-radius:26px;transition:.3s}
.toggle-slider::before{content:"";position:absolute;height:20px;width:20px;left:3px;bottom:3px;background:#fff;border-radius:50%;transition:.3s}
.toggle-switch input:checked+.toggle-slider{background:#F05726}
.toggle-switch input:checked+.toggle-slider::before{transform:translateX(22px)}
